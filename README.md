# Music Player

Music Player is a lightweight, minimalist music and podcast player built in Rust. It serves as an **alternative interface to Rhythmbox**, utilizing its existing XML database for music and podcast management. Music Player is designed to offer a fast, resource-efficient way to browse and play your tracks and podcasts directly from the terminal.

## Features

### Core Features:
- **MP3 Playback**: Play local MP3 files using the Rhythmbox music database.
- **Podcast Playback**: Access and play podcasts directly from the Rhythmbox podcast list.
- **Queue Management**: Basic management of play queues.

### Additional Features:
- **Fuzzy Search**: Quickly find tracks using fuzzy search on the Rhythmbox database.
- **Smart Shuffle Mode**: A shuffle mode that prioritizes tracks that haven’t been played recently.
- **Sorting**: Sort your tracks by search score, title, date, rating, or last played.
- **Minimal Resource Usage**: Consumes significantly less CPU and memory compared to Rhythmbox’s graphical interface.
- **GStreamer Integration**: Uses GStreamer for efficient media playback.

### Limitations:
- **Static Database Access**: Music Player uses Rhythmbox's existing database, but **does not update the list of podcasts or playlists**. You will need to use Rhythmbox to refresh or modify these lists.

## Installation

### Via Nix Flake

For Nix users, Music Player can be installed via Nix Flakes:

```bash
nix run github:djedi23/music-player
```

### From Source (using Cargo)

To install from source, ensure you have Rust and Cargo installed:

1. Clone the repository:

```bash
git clone https://github.com/djedi23/music-player.git
```

2. Build the project:

```bash
cargo build --release
```

3. Run the binary:

```bash
./target/release/music-player
```

## Command-Line Interface (CLI) Usage

You can run Music Player from the command line with several options and commands:

```bash
Usage: music-player [OPTIONS] [FILE] [COMMAND]
```

### Commands:
- `config`: Manage the configuration settings.
- `help`: Display the help menu.

#### Arguments:
- `[FILE]`: Specify a file to play directly on launch.

#### Options:

- `-p, --profile <PROFILE>`: Load a specific profile.
- `--playlist-path <PLAYLIST_PATH>`: Set the path to the playlist file.
- `--completion <COMPLETION>`: Generate shell completions for bash, elvish, fish, powershell, or zsh.
- `-h, --help`: Display help information.
- `-V, --version`: Show the current version of the application.

### Config Commands

```bash
music-player config <COMMAND>
```

- `clean`: Clean configuration files in case of issues.
- `show`: Display current configuration files.
- `help`: Show help for configuration commands.

#### Config Clean Command

```bash
music-player config clean [OPTIONS]
```
- `--playlist`: Remove the playlist file to clean up obsolete podcast entries.
- `--main`: Delete the main config file (stores the current track and playback position).
- `-h, --help`: Display help information.

## TUI Keybindings

Music Player offers intuitive keybindings to easily navigate and control playback in the terminal interface:

| Keybinding | Action                             |
| ---------- | ---------------------------------- |
| ⎇-h        | Display help                       |
| ⎋, ^-c     | Quit the player                    |
| ⎇-m        | Show local tracks (from Rhythmbox) |
| ⎇-p        | Show podcasts                      |
| ⎇-q        | Show queue                         |
| ⎇-e        | Enqueue the selected track         |
| ⎇-s        | Sort tracks by search score        |
| ⎇-t        | Sort tracks by title               |
| ⎇-d        | Sort tracks by date                |
| ⎇-r        | Sort tracks by rating              |
| ⎇-l        | Sort tracks by last played         |
| ⎇-0..5     | Rate the selected track (0-5)      |
| ⎇-o        | Toggle shuffle mode                |
| ⎇-c        | Repeat the current track           |
| ⎇-g        | Select the currently playing track |
| ↓,↑,⇟,⇞    | Navigate tracks                    |
| ⏎          | Play the selected track            |
| ⏯          | Play/Pause toggle                  |
| ⏹          | Stop playback                      |
| ⏭          | Play next track                    |
| ←, →       | Seek backward/forward by 5 seconds |

## How it Works

Music Player directly reads the **XML database** generated by Rhythmbox. This allows you to continue using Rhythmbox to manage your playlists and podcasts while benefiting from Music Player's lightweight terminal interface for everyday playback. However, Music Player **does not modify or refresh** the database—it simply uses the existing information. With the exception when you rate a track or when the it update the play counter and the last played date.

## Contributing

Contributions are welcome! If you'd like to suggest a feature or report a bug, please open an issue. Pull requests are encouraged.

1. Fork the repository.
1. Create a new branch (`git checkout -b feature-branch`).
1. Make your changes and commit (`git commit -m 'Add new feature'`).
1. Push to the branch (`git push origin feature-branch`).
1. Open a Pull Request.

## License

Music Player is released under the MIT License. See the LICENSE file for details.

Enjoy a lightweight and efficient music experience directly in your terminal with Music Player, powered by the Rhythmbox database.


> ChatGPT can make mistakes. Check important info.
